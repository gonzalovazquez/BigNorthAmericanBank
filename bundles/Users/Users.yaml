swagger: '2.0'
info:
  contact:
    name: Eric Broda
    url: N/A
    email: ericbroda@rogers.com
  version: v3_0_0
  description: >-
    An Open Source API for Banks.  (c) TESOBE Ltd. 2011 - 2016. Licensed under
    the AGPL and commercial licences.  Decomposed from Master PSD2 Swagger
    (http://psd2.it/#psd2apps).  Generated by psd2-generator:
    https://github.com/ericbroda/psd2-generator
  title: 'API URI: /users'
host: apisandbox.openbankproject.com
basePath: /obp/v3_0_0
schemes:
  - http
  - https
securityDefinitions:
  PSUOAuth2Security:
    type: oauth2
    flow: application
    tokenUrl: 'http://localhost:8080/oauth2/token'
    scopes:
      Users.create: CREATE access to Users
      Users.read: READ access to Users
      Users.update: UPDATE access to Users
      Users.delete: DELETE access to Users
      Users.all: APP access to Users
paths:
  /users:
    get:
      tags:
        - '3_0_0'
      summary: Get all Users
      description: >-
        <p>Get all users</p><p>Login is required. CanGetAnyUser entitlement is
        required,</p>
      operationId: v3_0_0-getUsers
      parameters: []
      responses:
        '200':
          description: Success
          schema:
            required:
              - users
            properties:
              users:
                type: array
                items:
                  required:
                    - user_id
                    - email
                    - provider_id
                    - provider
                    - username
                    - entitlements
                  properties:
                    provider:
                      type: string
                      example: OBP
                    email:
                      type: string
                      example: robert.x.0.gh@example.com
                    username:
                      type: string
                      example: robert.x.0.gh
                    provider_id:
                      type: string
                      example: OBP
                    user_id:
                      type: string
                      example: 5995d6a2-01b3-423c-a173-5481df49bdaf
                    entitlements:
                      required:
                        - list
                      properties:
                        list:
                          type: array
                          items:
                            required:
                              - entitlement_id
                              - role_name
                              - bank_id
                            properties:
                              bank_id:
                                type: string
                                example: gh.29.uk
                              role_name:
                                type: string
                                example: CanQueryOtherUser
                              entitlement_id:
                                type: string
                                example: 6fb17583-1e49-4435-bb74-a14fe0996723
        '400':
          description: Error
          schema:
            properties:
              message:
                type: string
                example: 'OBP-20001: User not logged in. Authentication is required!'
      security:
        - PSUOAuth2Security:
            - Users.all
    post:
      tags:
        - '2_0_0'
      summary: Create User.
      description: >-
        <p>Creates OBP user.  No authorisation (currently)
        required.</p><p>Mimics current webform to Register.</p><p>Requires
        username(email) and password.</p><p>Returns 409 error if username not
        unique.</p><p>May require validation of email address.</p>
      operationId: v2_0_0-createUser
      parameters:
        - in: body
          name: body
          description: BANK_BODY
          required: true
          schema:
            required:
              - email
              - username
              - password
              - first_name
              - last_name
            properties:
              first_name:
                type: string
                example: String
              email:
                type: string
                example: String
              username:
                type: string
                example: String
              last_name:
                type: string
                example: String
              password:
                type: string
                example: String
      responses:
        '201':
          description: Success
          schema:
            required:
              - user_id
              - email
              - provider_id
              - provider
              - username
              - entitlements
            properties:
              provider:
                type: string
                example: OBP
              email:
                type: string
                example: robert.x.0.gh@example.com
              username:
                type: string
                example: robert.x.0.gh
              provider_id:
                type: string
                example: OBP
              user_id:
                type: string
                example: 5995d6a2-01b3-423c-a173-5481df49bdaf
              entitlements:
                required:
                  - list
                properties:
                  list:
                    type: array
                    items:
                      required:
                        - entitlement_id
                        - role_name
                        - bank_id
                      properties:
                        bank_id:
                          type: string
                          example: gh.29.uk
                        role_name:
                          type: string
                          example: CanQueryOtherUser
                        entitlement_id:
                          type: string
                          example: 6fb17583-1e49-4435-bb74-a14fe0996723
        '400':
          description: Error
          schema:
            properties:
              message:
                type: string
                example: 'OBP-20001: User not logged in. Authentication is required!'
      security:
        - PSUOAuth2Security:
            - Users.all
